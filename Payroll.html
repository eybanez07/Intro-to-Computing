<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simple Payroll - Ethan Addu</title>
  <link rel="stylesheet" href="css/styles.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-dark text-light">
  <div class="container py-5">
    <h2 class="text-center mb-4">Assignment #4 - Simple Payroll</h2>

    <!-- Input Form -->
    <div class="card bg-secondary mb-4 p-3">
      <div class="row g-2">
        <div class="col-md-3"><input type="text" id="name" class="form-control" placeholder="Employee Name" /></div>
        <div class="col-md-2"><input type="number" id="days" class="form-control" placeholder="Days Worked" /></div>
        <div class="col-md-2"><input type="number" id="rate" class="form-control" placeholder="Daily Rate" /></div>
        <div class="col-md-2"><input type="number" id="deduction" class="form-control" placeholder="Deduction" /></div>
        <div class="col-md-3 d-flex gap-2">
          <button class="btn btn-success w-50" onclick="addEmployee()">Add</button>
          <button class="btn btn-danger w-50" onclick="deleteEmployee()">Delete</button>
        </div>
      </div>
    </div>

    <!-- Payroll Table -->
    <div class="table-responsive">
      <table class="table table-dark table-striped text-center align-middle">
        <thead class="table-light text-dark">
          <tr>
            <th>No.</th>
            <th>Employee Name</th>
            <th>Days Worked</th>
            <th>Daily Rate</th>
            <th>Gross Pay</th>
            <th>Deduction</th>
            <th>Net Pay</th>
          </tr>
        </thead>
        <tbody id="payrollTable"></tbody>
      </table>
    </div>

    <div class="text-center mt-4">
      <a href="index.html" class="btn btn-outline-light">‚Üê Back to Main Menu</a>
    </div>
  </div>

  <!-- DELETE DIALOG MODAL -->
  <div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-dark text-light">
        <div class="modal-header">
          <h5 class="modal-title">Delete Employee</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <label class="form-label">Enter Line Number to Delete:</label>
          <input type="number" id="deleteLineNumber" class="form-control" placeholder="e.g. 1">
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button class="btn btn-danger" onclick="confirmDelete()">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    let payrollList = [];

    function addEmployee() {
      const name = document.getElementById("name").value.trim();
      const days = parseFloat(document.getElementById("days").value);
      const rate = parseFloat(document.getElementById("rate").value);
      const deduction = parseFloat(document.getElementById("deduction").value);

      if (!name || isNaN(days) || isNaN(rate) || isNaN(deduction)) {
        alert("Please fill all fields correctly!");
        return;
      }

      const grossPay = days * rate;
      const netPay = grossPay - deduction;

      payrollList.push({ name, days, rate, grossPay, deduction, netPay });
      updateTable();
      clearInputs();
    }

    // OPEN MODAL FOR DELETE
    function deleteEmployee() {
      const modal = new bootstrap.Modal(document.getElementById("deleteModal"));
      modal.show();
    }

    // CONFIRM DELETE USING DIALOG
    function confirmDelete() {
      const lineNumber = parseInt(document.getElementById("deleteLineNumber").value);
      const index = lineNumber - 1;

      if (isNaN(index) || index < 0 || index >= payrollList.length) {
        alert("Invalid Line Number!");
        return;
      }

      payrollList.splice(index, 1);
      updateTable();

      document.getElementById("deleteLineNumber").value = "";
      bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide();
    }

    function updateTable() {
      const table = document.getElementById("payrollTable");
      table.innerHTML = "";
      payrollList.forEach((emp, i) => {
        table.innerHTML += `
          <tr>
            <td>${i + 1}</td>
            <td>${emp.name}</td>
            <td>${emp.days}</td>
            <td>${emp.rate.toFixed(2)}</td>
            <td>${emp.grossPay.toFixed(2)}</td>
            <td>${emp.deduction.toFixed(2)}</td>
            <td>${emp.netPay.toFixed(2)}</td>
          </tr>`;
      });
    }

    function clearInputs() {
      document.getElementById("name").value = "";
      document.getElementById("days").value = "";
      document.getElementById("rate").value = "";
      document.getElementById("deduction").value = "";
    }
  </script>

</body>
</html>
